---
- name: RHEL Patching
  hosts: linux

  tasks:
    - name: List available updates (all)
      yum:
        list: updates
      register: update_list
      when: security_patch == "no"
      
    - name: List available updates (security only)
      yum:
        list: updates
        security: yes
      register: update_list
      when: security_patch == "yes"
      
    - name: show list
      debug:
        msg: "{{ update_list|list }}"
